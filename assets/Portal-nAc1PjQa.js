import{r as a,a1 as E,d as f,E as O,o as $,a2 as U,a3 as k,S as Y,l as j,p as F}from"./index-PODOxm4l.js";const _=()=>({height:0,opacity:0}),A=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},G=t=>({height:t?t.offsetHeight:0}),b=(t,e)=>(e==null?void 0:e.deadline)===!0||e.propertyName==="height",J=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:_,onEnterStart:_,onAppearActive:A,onEnterActive:A,onLeaveStart:G,onLeaveActive:_,onAppearEnd:b,onEnterEnd:b,onLeaveEnd:b,motionDeadline:500}},oe=(t,e,n)=>n!==void 0?n:`${t}-${e}`,ae=J;var q=a.createContext(null),H=[];function K(t,e){var n=a.useState(function(){if(!E())return null;var u=document.createElement("div");return u}),r=f(n,1),o=r[0],i=a.useRef(!1),c=a.useContext(q),d=a.useState(H),h=f(d,2),s=h[0],m=h[1],y=c||(i.current?void 0:function(u){m(function(l){var C=[u].concat(O(l));return C})});function v(){o.parentElement||document.body.appendChild(o),i.current=!0}function p(){var u;(u=o.parentElement)===null||u===void 0||u.removeChild(o),i.current=!1}return $(function(){return t?c?c(v):v():p(),p},[t]),$(function(){s.length&&(s.forEach(function(u){return u()}),m(H))},[s]),[o,y]}var w;function V(t){if(typeof document>"u")return 0;if(t||w===void 0){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var o=e.offsetWidth;n.style.overflow="scroll";var i=e.offsetWidth;o===i&&(i=n.clientWidth),document.body.removeChild(n),w=o-i}return w}function N(t){var e=t.match(/^(.*)px$/),n=Number(e==null?void 0:e[1]);return Number.isNaN(n)?V():n}function X(t){if(typeof document>"u"||!t||!(t instanceof Element))return{width:0,height:0};var e=getComputedStyle(t,"::-webkit-scrollbar"),n=e.width,r=e.height;return{width:N(n),height:N(r)}}function Z(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var ee="rc-util-locker-".concat(Date.now()),P=0;function te(t){var e=!!t,n=a.useState(function(){return P+=1,"".concat(ee,"_").concat(P)}),r=f(n,1),o=r[0];$(function(){if(e){var i=X(document.body).width,c=Z();U(`
html body {
  overflow-y: hidden;
  `.concat(c?"width: calc(100% - ".concat(i,"px);"):"",`
}`),o)}else k(o);return function(){k(o)}},[e,o])}var T=!1;function ne(t){return typeof t=="boolean"&&(T=t),T}var W=function(e){return e===!1?!1:!E()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},ie=a.forwardRef(function(t,e){var n=t.open,r=t.autoLock,o=t.getContainer;t.debug;var i=t.autoDestroy,c=i===void 0?!0:i,d=t.children,h=a.useState(n),s=f(h,2),m=s[0],y=s[1],v=m||n;a.useEffect(function(){(c||n)&&y(n)},[n,c]);var p=a.useState(function(){return W(o)}),u=f(p,2),l=u[0],C=u[1];a.useEffect(function(){var R=W(o);C(R??null)});var z=K(v&&!l),D=f(z,2),x=D[0],I=D[1],g=l??x;te(r&&n&&E()&&(g===x||g===document.body));var L=null;if(d&&Y(d)&&e){var M=d;L=M.ref}var Q=j(L,e);if(!v||!E()||l===void 0)return null;var B=g===!1||ne(),S=d;return e&&(S=a.cloneElement(d,{ref:Q})),a.createElement(q.Provider,{value:I},B?S:F.createPortal(S,g))});export{ie as P,oe as g,ae as i};
